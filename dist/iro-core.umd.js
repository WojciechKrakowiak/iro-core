!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).iroCore={})}(this,function(t){function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var r="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a=new RegExp("rgb"+n),h=new RegExp("rgba"+i),s=new RegExp("hsl"+n),o=new RegExp("hsla"+i),u=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),l=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),c=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),g=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),d=Math.log,f=Math.round,v=Math.floor;function b(t,e,r){return Math.min(Math.max(t,e),r)}function w(t,e){var r=t.indexOf("%")>-1,n=parseFloat(t);return r?e/100*n:n}function x(t){return parseInt(t,16)}function y(t){return t.toString(16).padStart(2,"0")}var p=function(){function t(t,r){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=r,this.initialValue=e({},this.$)}var r,n=t.prototype;return n.set=function(e){if("string"==typeof e)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else{if("object"!=typeof e)throw new Error("Invalid color value");e instanceof t?this.hsv=e.hsv:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin)}},n.setChannel=function(t,r,n){var i;this[t]=e({},this[t],((i={})[r]=n,i))},n.reset=function(){this.hsva=this.initialValue},n.clone=function(){return new t(this)},n.unbind=function(){this.onChange=void 0},t.hsvToRgb=function(t){var e=t.h/60,r=t.s/100,n=t.v/100,i=v(e),a=e-i,h=n*(1-r),s=n*(1-a*r),o=n*(1-(1-a)*r),u=i%6,l=[o,n,n,s,h,h][u],c=[h,h,o,n,n,s][u];return{r:b(255*[n,s,h,h,o,n][u],0,255),g:b(255*l,0,255),b:b(255*c,0,255)}},t.rgbToHsv=function(t){var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.max(e,r,n),a=Math.min(e,r,n),h=i-a,s=0,o=i,u=0===i?0:h/i;switch(i){case a:s=0;break;case e:s=(r-n)/h+(r<n?6:0);break;case r:s=(n-e)/h+2;break;case n:s=(e-r)/h+4}return{h:60*s%360,s:b(100*u,0,100),v:b(100*o,0,100)}},t.hsvToHsl=function(t){var e=t.s/100,r=t.v/100,n=(2-e)*r,i=n<=1?n:2-n;return{h:t.h,s:b(100*(i<1e-9?0:e*r/i),0,100),l:b(50*n,0,100)}},t.hslToHsv=function(t){var e=2*t.l,r=t.s*(e<=100?e:200-e)/100;return{h:t.h,s:b(100*(e+r<1e-9?0:2*r/(e+r)),0,100),v:b((e+r)/2,0,100)}},t.kelvinToRgb=function(t){var e,r,n,i=t/100;return i<66?(e=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*d(r),n=i<20?0:.8274096064007395*(n=i-10)-254.76935184120902+115.67994401066147*d(n)):(e=351.97690566805693+.114206453784165*(e=i-55)-40.25366309332127*d(e),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*d(r),n=255),{r:b(v(e),0,255),g:b(v(r),0,255),b:b(v(n),0,255)}},t.rgbToKelvin=function(e){for(var r,n=e.r,i=e.b,a=2e3,h=4e4;h-a>.4;){var s=t.kelvinToRgb(r=.5*(h+a));s.b/s.r>=i/n?h=r:a=r}return r},(r=[{key:"hsv",get:function(){var t=this.$;return{h:t.h,s:t.s,v:t.v}},set:function(t){var r=this.$;if(t=e({},r,t),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var i in r)n[i]=t[i]!=r[i];this.$=t,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=t}},{key:"hsva",get:function(){return e({},this.$)},set:function(t){this.hsv=t}},{key:"hue",get:function(){return this.$.h},set:function(t){this.hsv={h:t}}},{key:"saturation",get:function(){return this.$.s},set:function(t){this.hsv={s:t}}},{key:"value",get:function(){return this.$.v},set:function(t){this.hsv={v:t}}},{key:"alpha",get:function(){return this.$.a},set:function(t){this.hsv=e({},this.hsv,{a:t})}},{key:"kelvin",get:function(){return t.rgbToKelvin(this.rgb)},set:function(e){this.rgb=t.kelvinToRgb(e)}},{key:"red",get:function(){return this.rgb.r},set:function(t){this.rgb=e({},this.rgb,{r:t})}},{key:"green",get:function(){return this.rgb.g},set:function(t){this.rgb=e({},this.rgb,{g:t})}},{key:"blue",get:function(){return this.rgb.b},set:function(t){this.rgb=e({},this.rgb,{b:t})}},{key:"rgb",get:function(){var e=t.hsvToRgb(this.$),r=e.g,n=e.b;return{r:f(e.r),g:f(r),b:f(n)}},set:function(r){this.hsv=e({},t.rgbToHsv(r),{a:void 0===r.a?1:r.a})}},{key:"rgba",get:function(){return e({},this.rgb,{a:this.alpha})},set:function(t){this.rgb=t}},{key:"hsl",get:function(){var e=t.hsvToHsl(this.$),r=e.s,n=e.l;return{h:f(e.h),s:f(r),l:f(n)}},set:function(r){this.hsv=e({},t.hslToHsv(r),{a:void 0===r.a?1:r.a})}},{key:"hsla",get:function(){return e({},this.hsl,{a:this.alpha})},set:function(t){this.hsl=t}},{key:"rgbString",get:function(){var t=this.rgb;return"rgb("+t.r+", "+t.g+", "+t.b+")"},set:function(t){var e,r,n,i,s=1;if((e=a.exec(t))?(r=w(e[1],255),n=w(e[2],255),i=w(e[3],255)):(e=h.exec(t))&&(r=w(e[1],255),n=w(e[2],255),i=w(e[3],255),s=w(e[4],1)),!e)throw new Error("Invalid rgb string");this.rgb={r:r,g:n,b:i,a:s}}},{key:"rgbaString",get:function(){var t=this.rgba;return"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")"},set:function(t){this.rgbString=t}},{key:"hexString",get:function(){var t=this.rgb;return"#"+y(t.r)+y(t.g)+y(t.b)},set:function(t){var e,r,n,i,a=255;if((e=u.exec(t))?(r=17*x(e[1]),n=17*x(e[2]),i=17*x(e[3])):(e=l.exec(t))?(r=17*x(e[1]),n=17*x(e[2]),i=17*x(e[3]),a=17*x(e[4])):(e=c.exec(t))?(r=x(e[1]),n=x(e[2]),i=x(e[3])):(e=g.exec(t))&&(r=x(e[1]),n=x(e[2]),i=x(e[3]),a=x(e[4])),!e)throw new Error("Invalid hex string");this.rgb={r:r,g:n,b:i,a:a/255}}},{key:"hex8String",get:function(){var t=this.rgba;return"#"+y(t.r)+y(t.g)+y(t.b)+y(v(255*t.a))},set:function(t){this.hexString=t}},{key:"hslString",get:function(){var t=this.hsl;return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},set:function(t){var e,r,n,i,a=1;if((e=s.exec(t))?(r=w(e[1],360),n=w(e[2],100),i=w(e[3],100)):(e=o.exec(t))&&(r=w(e[1],360),n=w(e[2],100),i=w(e[3],100),a=w(e[4],1)),!e)throw new Error("Invalid hsl string");this.hsl={h:r,s:n,l:i,a:a}}},{key:"hslaString",get:function(){var t=this.hsla;return"hsl("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},set:function(t){this.hslString=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,r),t}();function m(t){var e,r=t.width,n=t.sliderSize,i=t.handleRadius,a=t.padding,h="horizontal"===t.layoutDirection;return n=null!=(e=n)?e:2*a+2*i,"circle"===t.sliderShape?{handleStart:t.padding+t.handleRadius,handleRange:r-2*a-2*i,width:r,height:r,cx:r/2,cy:r/2,radius:r/2-t.borderWidth/2}:{handleStart:n/2,handleRange:r-n,radius:n/2,x:0,y:0,width:h?n:r,height:h?r:n}}function M(t,e){var r=e.hsva,n=e.rgb;switch(t.sliderType){case"red":return n.r/2.55;case"green":return n.g/2.55;case"blue":return n.b/2.55;case"alpha":return 100*r.a;case"kelvin":var i=t.minTemperature;return Math.max(0,Math.min((e.kelvin-i)/(t.maxTemperature-i)*100,100));case"hue":return r.h/=3.6;case"saturation":return r.s;case"value":default:return r.v}}var k,T=2*Math.PI,S=function(t,e){return Math.sqrt(t*t+e*e)};function R(t){return t.width/2-t.padding-t.handleRadius-t.borderWidth}function A(t){var e=t.width/2;return{width:t.width,radius:e-t.borderWidth,cx:e,cy:e}}function W(t,e,r){var n=t.wheelAngle,i=t.wheelDirection;return r&&"clockwise"===i?e=n+e:"clockwise"===i?e=360-n+e:r&&"anticlockwise"===i?e=n+180-e:"anticlockwise"===i&&(e=n-e),(e%360+360)%360}function P(t){var e=t.width/2,r=7*e/8,n=3*r/2,i=3*r/Math.sqrt(3);return{width:t.width,radius:e-t.borderWidth,trianglePoints:[{x:e,y:e/8},{x:e-i/2,y:e/8+n},{x:e+i/2,y:e/8+n}],cx:e,cy:e}}function D(t,e,r){var n=t.wheelAngle,i=t.wheelDirection;return((e=!r&&"clockwise"===i||r&&"anticlockwise"===i?(r?180:360)-(n-e):n+e)%360+360)%360}function H(t){var e=t.width/2;return{width:t.width,radius:e-t.borderWidth,ringWidth:t.ringWidth||2*(t.padding+t.handleRadius+t.borderWidth),cx:e,cy:e,borderWidth:t.borderWidth}}function F(t,e,r){var n=t.wheelAngle,i=t.wheelDirection;return((e=!r&&"clockwise"===i||r&&"anticlockwise"===i?(r?180:360)-(n-e):n+e)%360+360)%360}function I(t){var e=t.width/2,r=t.width*Math.sqrt(3)/2;return{width:t.width,height:r,radius:e-t.borderWidth,trianglePoints:[{x:t.width/2,y:0},{x:0,y:r},{x:t.width,y:r}],cx:e,cy:e,borderWidth:t.borderWidth}}function $(t,e,r){var n=t.wheelAngle,i=t.wheelDirection;return((e=!r&&"clockwise"===i||r&&"anticlockwise"===i?(r?180:360)-(n-e):n+e)%360+360)%360}function E(t){var e=t.width,r=t.boxHeight;return{width:e,height:null!=r?r:e,radius:t.padding+t.handleRadius}}t.IroColor=p,t.cssBorderStyles=function(t){return{boxSizing:"border-box",border:t.borderWidth+"px solid "+t.borderColor}},t.cssGradient=function(t,e,r){return t+"-gradient("+e+", "+r.map(function(t){return t[1]+" "+t[0]+"%"}).join(",")+")"},t.cssValue=function(t){return"string"==typeof t?t:t+"px"},t.getBoxDimensions=E,t.getBoxGradients=function(t,e){return[[[0,"#fff"],[100,"hsl("+e.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]},t.getBoxHandlePosition=function(t,e){var r=E(t),n=r.radius,i=e.hsv,a=r.height-2*n;return{x:n+i.s/100*(r.width-2*n),y:n+(a-i.v/100*a)}},t.getBoxStyles=function(t){var e;return(e={})["horizontal"===t.layoutDirection?"marginLeft":"marginTop"]=t.sliderMargin,e},t.getBoxValueFromInput=function(t,e,r){var n=E(t),i=n.radius,a=(r-i)/(n.height-2*i)*100;return{s:Math.max(0,Math.min((e-i)/(n.width-2*i)*100,100)),v:Math.max(0,Math.min(100-a,100))}},t.getCurrentSliderValue=M,t.getHandleAtPoint=function(t,e,r,n){for(var i=0;i<n.length;i++){var a=n[i].x-e,h=n[i].y-r;if(Math.sqrt(a*a+h*h)<t.handleRadius)return i}return null},t.getHueRingDimensions=H,t.getHueRingHandlePosition=function(t,e){var r=e.hsv,n=H(t),i=n.radius,a=n.cx,h=n.cy,s=(180+F(t,r.h,!0))*(Math.PI/180),o="clockwise"===t.wheelDirection?-1:1,u=t.ringWidth?t.ringWidth:2*(t.padding+t.handleRadius+t.borderWidth);return{x:a+(i-u/2)*Math.cos(s)*o,y:h+(i-u/2)*Math.sin(s)*o}},t.getHueRingValueFromInput=function(t,e,r){var n=H(t);e=n.cx-e,r=n.cy-r;var i=F(t,Math.atan2(-r,-e)*(180/Math.PI));return{h:Math.round(i)}},t.getSliderDimensions=m,t.getSliderGradient=function(t,e){var r=e.hsv,n=e.rgb;switch(t.sliderType){case"red":return[[0,"rgb(0,"+n.g+","+n.b+")"],[100,"rgb(255,"+n.g+","+n.b+")"]];case"green":return[[0,"rgb("+n.r+",0,"+n.b+")"],[100,"rgb("+n.r+",255,"+n.b+")"]];case"blue":return[[0,"rgb("+n.r+","+n.g+",0)"],[100,"rgb("+n.r+","+n.g+",255)"]];case"alpha":return[[0,"rgba("+n.r+","+n.g+","+n.b+",0)"],[100,"rgb("+n.r+","+n.g+","+n.b+")"]];case"kelvin":for(var i=[],a=t.minTemperature,h=t.maxTemperature,s=h-a,o=a,u=0;o<h;o+=s/8,u+=1){var l=p.kelvinToRgb(o);i.push([12.5*u,"rgb("+l.r+","+l.g+","+l.b+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var c=p.hsvToHsl({h:r.h,s:0,v:r.v}),g=p.hsvToHsl({h:r.h,s:100,v:r.v});return[[0,"hsl("+c.h+","+c.s+"%,"+c.l+"%)"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]];case"value":default:var d=p.hsvToHsl({h:r.h,s:r.s,v:100});return[[0,"#000"],[100,"hsl("+d.h+","+d.s+"%,"+d.l+"%)"]]}},t.getSliderGradientCoords=function(t){var e="horizontal"===t.layoutDirection;return{x1:"0%",y1:e?"100%":"0%",x2:e?"0%":"100%",y2:"0%"}},t.getSliderHandlePosition=function(t,e){var r=m(t),n=r.handleRange,i=r.handleStart,a="horizontal"===t.layoutDirection,h=a?r.width/2:r.height/2,s=i+M(t,e)/100*n;return a&&(s=-1*s+n+2*i),{x:a?h:s,y:a?s:h}},t.getSliderStyles=function(t){var e;return(e={})["horizontal"===t.layoutDirection?"marginLeft":"marginTop"]=t.sliderMargin,e},t.getSliderValueFromInput=function(t,e,r){var n,i=m(t),a=i.handleRange,h=i.handleStart;n="horizontal"===t.layoutDirection?-1*r+a+h:e-h,n=Math.max(Math.min(n,a),0);var s=Math.round(100/a*n);switch(t.sliderType){case"kelvin":var o=t.minTemperature;return o+s/100*(t.maxTemperature-o);case"alpha":return s/100;case"hue":return 3.6*s;case"red":case"blue":case"green":return 2.55*s;default:return s}},t.getSvgArcPath=function(t,e,r,n,i){var a=i-n<=180?0:1;return n*=Math.PI/180,i*=Math.PI/180,"M "+(t+r*Math.cos(i))+" "+(e+r*Math.sin(i))+" A "+r+" "+r+" 0 "+a+" 0 "+(t+r*Math.cos(n))+" "+(e+r*Math.sin(n))},t.getTriangleDimensions=I,t.getTriangleGradients=function(t,e){return[[[0,"#fff"],[100,"hsl("+e.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]},t.getTriangleHandlePosition=function(t,e){var r=e.hsv,n=I(t),i=n.height,a=n.width;return $(t,r.h,!0),{x:a*(1+r.v*(r.s-200)/2e4),y:i*(1-r.s*r.v/1e4)}},t.getTriangleValueFromInput=function(t,e,r){var n,i=I(t),a=i.width,h=i.height,s=i.cx,o=i.cy,u=t.rotation?t.rotation*Math.PI/180:0,l=e,c=r;if(t.rotation){var g=Math.sin(-1*u),d=Math.cos(-1*u),f=e-s-g*d*15,v=r-o-g*d*15;l=f*d-v*g,c=f*g+v*d,l+=s,c+=o}return n=50*(3-c/h-2*l/a),{s:Math.min(100,Math.max(0,Math.round(200*a*(h-c)/(3*h*a-2*h*l-a*c)))),v:Math.min(100,Math.max(0,Math.round(n)))}},t.getTriangleWheelDimensions=P,t.getTriangleWheelHandlePosition=function(t,e){var r=e.hsv,n=P(t),i=n.radius,a=n.cx,h=n.cy,s=(180+D(t,r.h,!0))*(Math.PI/180),o="clockwise"===t.wheelDirection?-1:1;return{x:a+(i-t.padding)*Math.cos(s)*o,y:h+(i-t.padding)*Math.sin(s)*o}},t.getTriangleWheelValueFromInput=function(t,e,r){var n=P(t);e=n.cx-e,r=n.cy-r;var i=D(t,Math.atan2(-r,-e)*(180/Math.PI));return{h:Math.round(i)}},t.getWheelDimensions=A,t.getWheelHandlePosition=function(t,e){var r=e.hsv,n=A(t),i=n.cx,a=n.cy,h=R(t),s=(180+W(t,r.h,!0))*(T/360),o=r.s/100*h,u="clockwise"===t.wheelDirection?-1:1;return{x:i+o*Math.cos(s)*u,y:a+o*Math.sin(s)*u}},t.getWheelValueFromInput=function(t,e,r){var n=A(t),i=n.cx,a=n.cy,h=R(t);e=i-e,r=a-r;var s=W(t,Math.atan2(-r,-e)*(360/T)),o=Math.min(S(e,r),h);return{h:Math.round(s),s:Math.round(100/h*o)}},t.iroColorPickerOptionDefaults={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},t.isInputInsideWheel=function(t,e,r){var n=A(t),i=t.width/2;return S(n.cx-e,n.cy-r)<i},t.resolveSvgUrl=function(t){k||(k=document.getElementsByTagName("base"));var e=window.navigator.userAgent,r=/^((?!chrome|android).)*safari/i.test(e),n=/iPhone|iPod|iPad/i.test(e),i=window.location;return(r||n)&&k.length>0?i.protocol+"//"+i.host+i.pathname+i.search+t:t},t.sliderDefaultOptions={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3},t.translateHueRingAngle=F,t.translateTriangleAngle=$,t.translateTriangleWheelAngle=D,t.translateWheelAngle=W});
//# sourceMappingURL=iro-core.umd.js.map
